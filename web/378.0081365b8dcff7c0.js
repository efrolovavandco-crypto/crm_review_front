"use strict";(self.webpackChunktest_angular15=self.webpackChunktest_angular15||[]).push([[378],{7378:(E,l,a)=>{a.r(l),a.d(l,{AuthModule:()=>y});var d=a(6895),s=a(433),u=a(8256),m=a(3039),f=a(5960);function c(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1," \u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b "),u.qZA())}function h(t,e){if(1&t&&(u.TgZ(0,"div",12),u.YNc(1,c,2,0,"div",11),u.qZA()),2&t){const o=u.oxw();u.xp6(1),u.Q6J("ngIf",(null==o.f.username.errors?null:o.f.username.errors.englishLettersOnly)&&(o.f.username.dirty||o.f.username.touched))}}function p(t,e){1&t&&(u.TgZ(0,"span"),u._uU(1,"\u0412\u043e\u0439\u0442\u0438"),u.qZA())}function g(t,e){1&t&&(u.TgZ(0,"span"),u._uU(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),u.qZA())}function v(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1," \u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function A(t,e){if(1&t&&(u.TgZ(0,"div",12),u.YNc(1,v,2,0,"div",11),u.qZA()),2&t){const o=u.oxw();u.xp6(1),u.Q6J("ngIf",(null==o.f.password.errors?null:o.f.password.errors.englishLettersOnly)&&(o.f.password.dirty||o.f.password.touched))}}let B=(()=>{const e=class{constructor(n,i,r){this.fb=n,this.router=i,this.authenticationService=r,this.loading=!1,this.error=""}ngOnInit(){this.authForm=this.fb.group({username:["",[s.kI.required,t=>t.value?/^[A-Za-z0-9 ]+$/.test(t.value)?null:{englishLettersOnly:!0,message:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b"}:null]],password:["",s.kI.required]})}get f(){return this.authForm.controls}redirectByRole(n){"Admin"===n?this.router.navigate(["/admin"]):"User"===n&&this.router.navigate(["/user"])}onSubmit(){this.error="",this.authForm.invalid?Object.keys(this.f).forEach(n=>{this.f[n].markAsTouched()}):(this.loading=!0,this.authenticationService.login(this.authForm.value.username,this.authForm.value.password).subscribe({next:n=>{this.loading=!1,n&&n.role?this.redirectByRole(n.role):this.error="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},error:n=>{this.loading=!1,this.error="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",console.error("Login error:",n)}}))}};let t=e;return e.\u0275fac=function(i){return new(i||e)(u.Y36(s.qu),u.Y36(m.F0),u.Y36(f.$))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-auth"]],decls:24,vars:6,consts:[[1,"container","pt-5","col-md-6"],["role","alert",1,"alert","alert-success"],[1,"card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","pb-4"],["type","text","formControlName","username",1,"form-control"],["class","alert alert-danger mt-3",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","mt-3"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," \u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438:"),u._UZ(3,"br"),u._uU(4," \u0410\u0434\u043c\u0438\u043d - \u043b\u043e\u0433\u0438\u043d : admin, \u043f\u0430\u0440\u043e\u043b\u044c: admin "),u.qZA(),u.TgZ(5,"div",2)(6,"div",3)(7,"h4"),u._uU(8,"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),u.qZA()(),u.TgZ(9,"div",4)(10,"form",5),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(11,"div",6)(12,"label"),u._uU(13,"\u041b\u043e\u0433\u0438\u043d"),u.qZA(),u._UZ(14,"input",7),u.YNc(15,h,2,1,"div",8),u.qZA(),u.TgZ(16,"div",6)(17,"label"),u._uU(18,"\u041f\u0430\u0440\u043e\u043b\u044c"),u.qZA(),u._UZ(19,"input",9),u.qZA(),u.TgZ(20,"button",10),u.YNc(21,p,2,0,"span",11),u.YNc(22,g,2,0,"span",11),u.qZA(),u.YNc(23,A,2,1,"div",8),u.qZA()()()()),2&i&&(u.xp6(10),u.Q6J("formGroup",r.authForm),u.xp6(5),u.Q6J("ngIf",(null==r.f.username.errors?null:r.f.username.errors.englishLettersOnly)&&(r.f.username.dirty||r.f.username.touched)),u.xp6(5),u.Q6J("disabled",r.loading||r.authForm.invalid),u.xp6(1),u.Q6J("ngIf",!r.loading),u.xp6(1),u.Q6J("ngIf",r.loading),u.xp6(1),u.Q6J("ngIf",(null==r.f.password.errors?null:r.f.password.errors.englishLettersOnly)&&(r.f.password.dirty||r.f.password.touched)))},dependencies:[d.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),t})();var C=a(529);const T=[{path:"",component:B}];let y=(()=>{const e=class{};let t=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[d.ez,s.UX,s.u5,C.JF,m.Bz.forChild(T)]}),t})()}}]);