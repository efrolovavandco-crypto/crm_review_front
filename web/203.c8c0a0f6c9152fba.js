"use strict";(self.webpackChunktest_angular15=self.webpackChunktest_angular15||[]).push([[203],{1203:(J,f,s)=>{s.r(f),s.d(f,{UserModule:()=>P});var a=s(6895),d=s(3039),u=s(8256),p=s(5960),r=s(433),v=s(9010);function Z(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){const i=u.oxw(2);u.xp6(1),u.hij(" ",null==i.fullname||null==i.fullname.errors?null:i.fullname.errors.onlyDigits," ")}}function _(e,t){if(1&e&&(u.TgZ(0,"div",16),u.YNc(1,Z,2,1,"div",17),u.qZA()),2&e){const i=u.oxw();u.xp6(1),u.Q6J("ngIf",null==i.fullname||null==i.fullname.errors?null:i.fullname.errors.onlyDigits)}}function b(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){const i=u.oxw(2);u.xp6(1),u.hij(" ",null==i.phone||null==i.phone.errors?null:i.phone.errors.onlyDigits," ")}}function T(e,t){if(1&e&&(u.TgZ(0,"div",16),u.YNc(1,b,2,1,"div",17),u.qZA()),2&e){const i=u.oxw();u.xp6(1),u.Q6J("ngIf",null==i.phone||null==i.phone.errors?null:i.phone.errors.onlyDigits)}}function A(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){const i=u.oxw(2);u.xp6(1),u.hij(" ",null==i.age||null==i.age.errors?null:i.age.errors.onlyDigits," ")}}function E(e,t){if(1&e&&(u.TgZ(0,"div",16),u.YNc(1,A,2,1,"div",17),u.qZA()),2&e){const i=u.oxw();u.xp6(1),u.Q6J("ngIf",null==i.age||null==i.age.errors?null:i.age.errors.onlyDigits)}}function U(e,t){if(1&e&&(u.TgZ(0,"option",18),u._uU(1),u.qZA()),2&e){const i=t.$implicit;u.Q6J("value",i.value),u.xp6(1),u.hij(" ",i.label," ")}}let m=(()=>{const t=class{constructor(n,o,l){this.fb=n,this.userService=o,this.authService=l,this.isOpen=!1,this.positions=[{value:"loader",label:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a"},{value:"courier",label:"\u041a\u0443\u0440\u044c\u0435\u0440"},{value:"accountant",label:"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440"},{value:"manager",label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}],this.formEditProfile=this.fb.group({fullname:["",[e=>{const t=e.value;return t?/^[\u0410-\u044f ]+$/.test(t)?null:{onlyDigits:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0443\u0441\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b"}:null}]],phone:["",[e=>{const t=e.value;return t?/^[0-9]+$/.test(t)?null:{onlyDigits:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b"}:null}]],age:["",[e=>{const t=e.value;return t?/^[0-9]+$/.test(t)?null:{onlyDigits:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b"}:null}]],gender:[""],position:[{value:"",disabled:!0}]})}open(n){this.isOpen=!0,this.UserId=n.id,this.formEditProfile.patchValue({fullname:n.fullname,phone:n.phone,age:n.age,gender:n.gender,position:n.position}),this.formEditProfile.get("position")?.disable()}submit(){if(this.formEditProfile.invalid)return;const n={...this.formEditProfile.getRawValue(),id:this.UserId};this.userService.update(n).subscribe({next:o=>{this.authService.updateUserLocalStorage(o),this.isOpen=!1,console.log(o)},error:o=>console.error(o)})}get fullname(){return this.formEditProfile.get("fullname")}get age(){return this.formEditProfile.get("age")}get phone(){return this.formEditProfile.get("phone")}};let e=t;return t.\u0275fac=function(o){return new(o||t)(u.Y36(r.qu),u.Y36(v.K),u.Y36(p.$))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-profile"]],decls:42,vars:6,consts:[[1,"container","pt-5",3,"hidden"],[1,"col-6","pt-5",3,"formGroup","ngSubmit"],[1,"pb-3","text-success"],["formControlName","fullname",1,"form-control","mb-3"],["class","invalid-feedback","class","alert alert-danger",4,"ngIf"],["formControlName","phone",1,"form-control","mb-3"],["formControlName","age",1,"form-control","mb-3"],["formControlName","gender",1,"form-control","mb-3"],["value","","disabled",""],["value","male"],["value","female"],["formControlName","position",1,"form-control","mb-3"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],[1,"btn","btn-success","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[3,"value"]],template:function(o,l){1&o&&(u.TgZ(0,"div",0),u._UZ(1,"hr"),u.TgZ(2,"form",1),u.NdJ("ngSubmit",function(){return l.submit()}),u.TgZ(3,"h4",2),u._uU(4,"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"),u.qZA(),u.TgZ(5,"label")(6,"strong"),u._uU(7,"\u0424\u0418\u041e"),u.qZA()(),u._UZ(8,"input",3),u.YNc(9,_,2,1,"div",4),u.TgZ(10,"label")(11,"strong"),u._uU(12,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA()(),u._UZ(13,"input",5),u.YNc(14,T,2,1,"div",4),u.TgZ(15,"label")(16,"strong"),u._uU(17,"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"),u.qZA()(),u._UZ(18,"input",6),u.YNc(19,E,2,1,"div",4),u.TgZ(20,"label")(21,"strong"),u._uU(22,"\u041f\u043e\u043b"),u.qZA()(),u.TgZ(23,"select",7)(24,"option",8),u._uU(25,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b"),u.qZA(),u.TgZ(26,"option",9),u._uU(27,"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),u.qZA(),u.TgZ(28,"option",10),u._uU(29,"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"),u.qZA()(),u.TgZ(30,"label")(31,"strong"),u._uU(32,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"),u.qZA()(),u.TgZ(33,"select",11)(34,"option",8),u._uU(35,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"),u.qZA(),u.YNc(36,U,2,2,"option",12),u.qZA(),u.TgZ(37,"div",13)(38,"button",14),u._uU(39,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),u.qZA(),u.TgZ(40,"button",15),u.NdJ("click",function(){return l.isOpen=!1}),u._uU(41,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),u.qZA()()()()),2&o&&(u.Q6J("hidden",!l.isOpen),u.xp6(2),u.Q6J("formGroup",l.formEditProfile),u.xp6(7),u.Q6J("ngIf",(null==l.fullname?null:l.fullname.invalid)&&((null==l.fullname?null:l.fullname.dirty)||(null==l.fullname?null:l.fullname.touched))),u.xp6(5),u.Q6J("ngIf",(null==l.phone?null:l.phone.invalid)&&((null==l.phone?null:l.phone.dirty)||(null==l.phone?null:l.phone.touched))),u.xp6(5),u.Q6J("ngIf",(null==l.age?null:l.age.invalid)&&((null==l.age?null:l.age.dirty)||(null==l.age?null:l.age.touched))),u.xp6(17),u.Q6J("ngForOf",l.positions))},dependencies:[a.sg,a.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]}),e})();function x(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",1)(1,"h4",2),u._uU(2,"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),u.qZA(),u._UZ(3,"br"),u.TgZ(4,"p")(5,"b"),u._uU(6,"\u0424\u0418\u041e:"),u.qZA(),u._uU(7),u.qZA(),u.TgZ(8,"p")(9,"b"),u._uU(10,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"),u.qZA(),u._uU(11),u.qZA(),u.TgZ(12,"p")(13,"b"),u._uU(14,"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"),u.qZA(),u._uU(15),u.qZA(),u.TgZ(16,"p")(17,"b"),u._uU(18,"\u041f\u043e\u043b:"),u.qZA(),u._uU(19),u.qZA(),u.TgZ(20,"p")(21,"b"),u._uU(22,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"),u.qZA(),u._uU(23),u.qZA(),u.TgZ(24,"button",3),u.NdJ("click",function(){const l=u.CHM(i).ngIf,c=u.oxw();return u.KtG(c.openEditProfile(l))}),u._uU(25,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),u.qZA()()}if(2&e){const i=t.ngIf,n=u.oxw();u.xp6(7),u.hij(" ",i.fullname||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",""),u.xp6(4),u.hij(" ",i.phone||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",""),u.xp6(4),u.hij(" ",i.age||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",""),u.xp6(4),u.hij(" ",n.getGenderText(i.gender),""),u.xp6(4),u.hij(" ",n.getPositionText(i.position),"")}}let y=(()=>{const t=class{constructor(n){this.authService=n,this.isOpen=!1,this.user$=this.authService.user}getGenderText(n){return n?"male"===n?"\u041c\u0443\u0436\u0441\u043a\u043e\u0439":"\u0416\u0435\u043d\u0441\u043a\u0438\u0439":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"}getPositionText(n){return n?{loader:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a",courier:"\u041a\u0443\u0440\u044c\u0435\u0440",accountant:"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440",manager:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",user:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",admin:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}[n]||n:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}openEditProfile(n){this.editProfile.open(n)}};let e=t;return t.\u0275fac=function(o){return new(o||t)(u.Y36(p.$))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-profile"]],viewQuery:function(o,l){if(1&o&&u.Gf(m,5),2&o){let c;u.iGM(c=u.CRH())&&(l.editProfile=c.first)}},decls:3,vars:3,consts:[["class","container pt-5",4,"ngIf"],[1,"container","pt-5"],[1,"text-primary"],[1,"btn","btn-primary",3,"click"]],template:function(o,l){1&o&&(u.YNc(0,x,26,5,"div",0),u.ALo(1,"async"),u._UZ(2,"app-edit-profile")),2&o&&u.Q6J("ngIf",u.lcZ(1,1,l.user$))},dependencies:[a.O5,m,a.Ov],encapsulation:2}),e})(),q=(()=>{const t=class{constructor(n){this.authService=n}logout(){this.authService.logout(),this.router.navigate(["/auth"])}};let e=t;return t.\u0275fac=function(o){return new(o||t)(u.Y36(p.$))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-user"]],decls:14,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between","pt-5"],[1,""],[1,"btn","btn-danger",3,"click"],[1,"nav","nav-tabs","pt-4"],[1,"nav-item"],["aria-current","page",1,"nav-link","active"],["href","#","tabindex","-1","aria-disabled","true",1,"nav-link","disabled"]],template:function(o,l){1&o&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),u._uU(3,"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),u.qZA(),u.TgZ(4,"button",3),u.NdJ("click",function(){return l.logout()}),u._uU(5,"\u0412\u044b\u0439\u0442\u0438"),u.qZA()(),u.TgZ(6,"ul",4)(7,"li",5)(8,"a",6),u._uU(9,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),u.qZA()(),u.TgZ(10,"li",5)(11,"a",7),u._uU(12,"\u041e\u043f\u0440\u043e\u0441\u044b"),u.qZA()()()(),u._UZ(13,"app-profile"))},dependencies:[y]}),e})(),h=(()=>{const t=class{};let e=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[a.ez,r.UX]}),e})(),D=(()=>{const t=class{};let e=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[a.ez,h]}),e})();const B=[{path:"",component:q}];let P=(()=>{const t=class{};let e=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[a.ez,D,h,d.Bz.forChild(B),d.Bz]}),e})()}}]);